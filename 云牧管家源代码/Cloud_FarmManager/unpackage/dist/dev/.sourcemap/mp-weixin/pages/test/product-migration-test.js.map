{"version":3,"file":"product-migration-test.js","sources":["pages/test/product-migration-test.vue","../../../../HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGVzdC9wcm9kdWN0LW1pZ3JhdGlvbi10ZXN0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"page-container\">\r\n\t\t<view class=\"header\">\r\n\t\t\t<text class=\"title\">商品数据迁移测试</text>\r\n\t\t\t<text class=\"subtitle\">将本地商品数据迁移到云端数据库</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 迁移状态 -->\r\n\t\t<view class=\"status-card\">\r\n\t\t\t<view class=\"status-header\">\r\n\t\t\t\t<text class=\"status-title\">迁移状态</text>\r\n\t\t\t\t<button class=\"refresh-btn\" @click=\"checkMigrationStatus\">刷新</button>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"status-content\">\r\n\t\t\t\t<text class=\"status-text\">商品总数: {{ migrationStatus.totalProducts }}</text>\r\n\t\t\t\t<text class=\"status-text\">状态: {{ migrationStatus.status }}</text>\r\n\t\t\t\t<text class=\"status-text\">最后检查: {{ migrationStatus.lastCheck }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 操作按钮 -->\r\n\t\t<view class=\"action-section\">\r\n\t\t\t<button class=\"action-btn migrate-btn\" @click=\"startMigration\" :disabled=\"loading\">\r\n\t\t\t\t{{ loading ? '迁移中...' : '开始迁移' }}\r\n\t\t\t</button>\r\n\t\t\t<button class=\"action-btn clear-btn\" @click=\"clearData\" :disabled=\"loading\">\r\n\t\t\t\t清空数据\r\n\t\t\t</button>\r\n\t\t\t<button class=\"action-btn test-btn\" @click=\"testCloudData\" :disabled=\"loading\">\r\n\t\t\t\t测试云端数据\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 测试结果 -->\r\n\t\t<view class=\"test-results\" v-if=\"testResults.length > 0\">\r\n\t\t\t<text class=\"results-title\">测试结果</text>\r\n\t\t\t<view class=\"result-item\" v-for=\"(result, index) in testResults\" :key=\"index\">\r\n\t\t\t\t<view class=\"result-header\">\r\n\t\t\t\t\t<text class=\"result-title\">{{ result.title }}</text>\r\n\t\t\t\t\t<text class=\"result-status\" :class=\"result.success ? 'success' : 'error'\">\r\n\t\t\t\t\t\t{{ result.success ? '成功' : '失败' }}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"result-message\">{{ result.message }}</text>\r\n\t\t\t\t<view v-if=\"result.data\" class=\"result-data\">\r\n\t\t\t\t\t<text class=\"data-title\">数据:</text>\r\n\t\t\t\t\t<text class=\"data-content\">{{ JSON.stringify(result.data, null, 2) }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 商品列表预览 -->\r\n\t\t<view class=\"products-preview\" v-if=\"products.length > 0\">\r\n\t\t\t<text class=\"preview-title\">商品列表预览</text>\r\n\t\t\t<view class=\"product-item\" v-for=\"product in products\" :key=\"product.id\">\r\n\t\t\t\t<image :src=\"product.image\" class=\"product-image\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<view class=\"product-info\">\r\n\t\t\t\t\t<text class=\"product-name\">{{ product.name }}</text>\r\n\t\t\t\t\t<text class=\"product-price\">¥{{ product.price }}</text>\r\n\t\t\t\t\t<text class=\"product-meta\">销量: {{ product.sales }} | 评分: {{ product.rating }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 日志输出 -->\r\n\t\t<view class=\"logs\" v-if=\"logs.length > 0\">\r\n\t\t\t<text class=\"logs-title\">操作日志</text>\r\n\t\t\t<view class=\"log-item\" v-for=\"(log, index) in logs\" :key=\"index\">\r\n\t\t\t\t<text class=\"log-time\">{{ log.time }}</text>\r\n\t\t\t\t<text class=\"log-message\" :class=\"log.type\">{{ log.message }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { migration, getAllProducts, getProductById } from '@/api/productService.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloading: false,\r\n\t\t\tmigrationStatus: {\r\n\t\t\t\ttotalProducts: 0,\r\n\t\t\t\tstatus: '未知',\r\n\t\t\t\tlastCheck: '从未检查'\r\n\t\t\t},\r\n\t\t\ttestResults: [],\r\n\t\t\tproducts: [],\r\n\t\t\tlogs: []\r\n\t\t}\r\n\t},\r\n\t\r\n\tonLoad() {\r\n\t\tthis.addLog('页面加载完成', 'info')\r\n\t\tthis.checkMigrationStatus()\r\n\t},\r\n\t\r\n\tmethods: {\r\n\t\t// 添加日志\r\n\t\taddLog(message, type = 'info') {\r\n\t\t\tconst now = new Date()\r\n\t\t\tconst time = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`\r\n\t\t\t\r\n\t\t\tthis.logs.unshift({\r\n\t\t\t\ttime,\r\n\t\t\t\tmessage,\r\n\t\t\t\ttype\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t// 限制日志数量\r\n\t\t\tif (this.logs.length > 50) {\r\n\t\t\t\tthis.logs = this.logs.slice(0, 50)\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 检查迁移状态\r\n\t\tasync checkMigrationStatus() {\r\n\t\t\ttry {\r\n\t\t\t\tthis.addLog('检查迁移状态...', 'info')\r\n\t\t\t\t\r\n\t\t\t\tconst result = await migration.checkStatus()\r\n\t\t\t\t\r\n\t\t\t\tif (result.code === 200) {\r\n\t\t\t\t\tthis.migrationStatus = {\r\n\t\t\t\t\t\ttotalProducts: result.data.totalProducts,\r\n\t\t\t\t\t\tstatus: result.data.migrationStatus === 'completed' ? '已完成' : '待迁移',\r\n\t\t\t\t\t\tlastCheck: new Date().toLocaleString()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.addLog(`迁移状态检查成功: ${result.data.totalProducts} 个商品`, 'success')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.addLog(`检查迁移状态失败: ${result.message}`, 'error')\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.addLog(`检查迁移状态异常: ${error.message}`, 'error')\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 开始迁移\r\n\t\tasync startMigration() {\r\n\t\t\tif (this.loading) return\r\n\t\t\t\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '确认迁移',\r\n\t\t\t\tcontent: '确定要将本地商品数据迁移到云端数据库吗？这将覆盖现有数据。',\r\n\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tawait this.performMigration()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t// 执行迁移\r\n\t\tasync performMigration() {\r\n\t\t\tthis.loading = true\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tthis.addLog('开始数据迁移...', 'info')\r\n\t\t\t\t\r\n\t\t\t\tconst result = await migration.migrateData()\r\n\t\t\t\t\r\n\t\t\t\tif (result.code === 200) {\r\n\t\t\t\t\tthis.addLog(`数据迁移成功: 插入了 ${result.data.insertedCount} 个商品`, 'success')\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '迁移成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 刷新状态\r\n\t\t\t\t\tawait this.checkMigrationStatus()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.addLog(`数据迁移失败: ${result.message}`, 'error')\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '迁移失败',\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.addLog(`数据迁移异常: ${error.message}`, 'error')\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '迁移异常',\r\n\t\t\t\t\ticon: 'error'\r\n\t\t\t\t})\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 清空数据\r\n\t\tasync clearData() {\r\n\t\t\tif (this.loading) return\r\n\t\t\t\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '确认清空',\r\n\t\t\t\tcontent: '确定要清空云端所有商品数据吗？此操作不可恢复！',\r\n\t\t\t\tconfirmColor: '#ff4757',\r\n\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tawait this.performClearData()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t// 执行清空数据\r\n\t\tasync performClearData() {\r\n\t\t\tthis.loading = true\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tthis.addLog('开始清空数据...', 'info')\r\n\t\t\t\t\r\n\t\t\t\tconst result = await migration.clearData()\r\n\t\t\t\t\r\n\t\t\t\tif (result.code === 200) {\r\n\t\t\t\t\tthis.addLog(`数据清空成功: 删除了 ${result.data.deletedCount} 个商品`, 'success')\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '清空成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 刷新状态\r\n\t\t\t\t\tawait this.checkMigrationStatus()\r\n\t\t\t\t\tthis.products = []\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.addLog(`数据清空失败: ${result.message}`, 'error')\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '清空失败',\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.addLog(`数据清空异常: ${error.message}`, 'error')\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '清空异常',\r\n\t\t\t\t\ticon: 'error'\r\n\t\t\t\t})\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 测试云端数据\r\n\t\tasync testCloudData() {\r\n\t\t\tif (this.loading) return\r\n\t\t\t\r\n\t\t\tthis.loading = true\r\n\t\t\tthis.testResults = []\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tthis.addLog('开始测试云端数据...', 'info')\r\n\t\t\t\t\r\n\t\t\t\t// 测试1: 获取商品列表\r\n\t\t\t\tawait this.testGetProductList()\r\n\t\t\t\t\r\n\t\t\t\t// 测试2: 获取商品详情\r\n\t\t\t\tawait this.testGetProductDetail()\r\n\t\t\t\t\r\n\t\t\t\t// 测试3: 搜索商品\r\n\t\t\t\tawait this.testSearchProducts()\r\n\t\t\t\t\r\n\t\t\t\tthis.addLog('云端数据测试完成', 'success')\r\n\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.addLog(`测试云端数据异常: ${error.message}`, 'error')\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 测试获取商品列表\r\n\t\tasync testGetProductList() {\r\n\t\t\ttry {\r\n\t\t\t\tconst products = await getAllProducts({ pageSize: 10 })\r\n\t\t\t\t\r\n\t\t\t\tthis.testResults.push({\r\n\t\t\t\t\ttitle: '获取商品列表',\r\n\t\t\t\t\tsuccess: products.length > 0,\r\n\t\t\t\t\tmessage: `获取到 ${products.length} 个商品`,\r\n\t\t\t\t\tdata: products.length > 0 ? products.slice(0, 3) : null\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (products.length > 0) {\r\n\t\t\t\t\tthis.products = products.slice(0, 5) // 显示前5个商品\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.testResults.push({\r\n\t\t\t\t\ttitle: '获取商品列表',\r\n\t\t\t\t\tsuccess: false,\r\n\t\t\t\t\tmessage: `测试失败: ${error.message}`,\r\n\t\t\t\t\tdata: null\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 测试获取商品详情\r\n\t\tasync testGetProductDetail() {\r\n\t\t\ttry {\r\n\t\t\t\tif (this.products.length === 0) {\r\n\t\t\t\t\tthis.testResults.push({\r\n\t\t\t\t\t\ttitle: '获取商品详情',\r\n\t\t\t\t\t\tsuccess: false,\r\n\t\t\t\t\t\tmessage: '没有可用的商品ID进行测试',\r\n\t\t\t\t\t\tdata: null\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst productId = this.products[0].id\r\n\t\t\t\tconst product = await getProductById(productId)\r\n\t\t\t\t\r\n\t\t\t\tthis.testResults.push({\r\n\t\t\t\t\ttitle: '获取商品详情',\r\n\t\t\t\t\tsuccess: product !== null,\r\n\t\t\t\t\tmessage: product ? `成功获取商品: ${product.name}` : '获取商品详情失败',\r\n\t\t\t\t\tdata: product ? {\r\n\t\t\t\t\t\tid: product.id,\r\n\t\t\t\t\t\tname: product.name,\r\n\t\t\t\t\t\tprice: product.price\r\n\t\t\t\t\t} : null\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.testResults.push({\r\n\t\t\t\t\ttitle: '获取商品详情',\r\n\t\t\t\t\tsuccess: false,\r\n\t\t\t\t\tmessage: `测试失败: ${error.message}`,\r\n\t\t\t\t\tdata: null\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 测试搜索商品\r\n\t\tasync testSearchProducts() {\r\n\t\t\ttry {\r\n\t\t\t\t// 使用\"瑶\"作为搜索关键词\r\n\t\t\t\tconst { searchProducts } = await import('@/api/productService.js')\r\n\t\t\t\tconst results = await searchProducts('瑶')\r\n\t\t\t\t\r\n\t\t\t\tthis.testResults.push({\r\n\t\t\t\t\ttitle: '搜索商品',\r\n\t\t\t\t\tsuccess: results.length >= 0,\r\n\t\t\t\t\tmessage: `搜索\"瑶\"找到 ${results.length} 个商品`,\r\n\t\t\t\t\tdata: results.length > 0 ? results.slice(0, 2) : null\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.testResults.push({\r\n\t\t\t\t\ttitle: '搜索商品',\r\n\t\t\t\t\tsuccess: false,\r\n\t\t\t\t\tmessage: `测试失败: ${error.message}`,\r\n\t\t\t\t\tdata: null\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import '@/uni.scss';\r\n\t\r\n\t.page-container {\r\n\t\tpadding: 30rpx;\r\n\t\tbackground-color: $color-secondary;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\t\r\n\t.header {\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\t\r\n\t.title {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: $color-dark;\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.subtitle {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.status-card {\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t.status-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.status-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: $color-dark;\r\n\t}\r\n\t\r\n\t.refresh-btn {\r\n\t\tbackground-color: $color-primary;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 8rpx;\r\n\t\tpadding: 8rpx 16rpx;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\t\r\n\t.status-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 10rpx;\r\n\t}\r\n\t\r\n\t.status-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\t\r\n\t.action-section {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\t\r\n\t.action-btn {\r\n\t\tpadding: 24rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tborder: none;\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.migrate-btn {\r\n\t\tbackground: linear-gradient(135deg, $color-primary, $color-highlight);\r\n\t}\r\n\t\r\n\t.clear-btn {\r\n\t\tbackground: linear-gradient(135deg, #ff4757, #ff3742);\r\n\t}\r\n\t\r\n\t.test-btn {\r\n\t\tbackground: linear-gradient(135deg, #5352ed, #3742fa);\r\n\t}\r\n\t\r\n\t.action-btn[disabled] {\r\n\t\topacity: 0.6;\r\n\t}\r\n\t\r\n\t.test-results {\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t.results-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: $color-dark;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.result-item {\r\n\t\tborder: 1px solid #eee;\r\n\t\tborder-radius: 8rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.result-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.result-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: $color-dark;\r\n\t}\r\n\t\r\n\t.result-status {\r\n\t\tfont-size: 24rpx;\r\n\t\tpadding: 4rpx 12rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\t\r\n\t\t&.success {\r\n\t\t\tbackground-color: #2ed573;\r\n\t\t\tcolor: white;\r\n\t\t}\r\n\t\t\r\n\t\t&.error {\r\n\t\t\tbackground-color: #ff4757;\r\n\t\t\tcolor: white;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.result-message {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.result-data {\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tborder-radius: 8rpx;\r\n\t\tpadding: 15rpx;\r\n\t}\r\n\t\r\n\t.data-title {\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: $color-dark;\r\n\t\tmargin-bottom: 8rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.data-content {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #666;\r\n\t\tfont-family: monospace;\r\n\t\twhite-space: pre-wrap;\r\n\t\tword-break: break-all;\r\n\t}\r\n\t\r\n\t.products-preview {\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t.preview-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: $color-dark;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.product-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 20rpx 0;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\t\r\n\t.product-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\t\r\n\t.product-image {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\t\r\n\t.product-info {\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.product-name {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: $color-dark;\r\n\t\tmargin-bottom: 8rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.product-price {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: $color-primary;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-bottom: 4rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.product-meta {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\t\r\n\t.logs {\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t.logs-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: $color-dark;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.log-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tpadding: 10rpx 0;\r\n\t\tborder-bottom: 1px solid #f0f0f0;\r\n\t}\r\n\t\r\n\t.log-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\t\r\n\t.log-time {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #999;\r\n\t\tmargin-right: 15rpx;\r\n\t\tmin-width: 80rpx;\r\n\t}\r\n\t\r\n\t.log-message {\r\n\t\tfont-size: 24rpx;\r\n\t\tflex: 1;\r\n\t\t\r\n\t\t&.info {\r\n\t\t\tcolor: #666;\r\n\t\t}\r\n\t\t\r\n\t\t&.success {\r\n\t\t\tcolor: #2ed573;\r\n\t\t}\r\n\t\t\r\n\t\t&.error {\r\n\t\t\tcolor: #ff4757;\r\n\t\t}\r\n\t}\r\n</style> ","import MiniProgramPage from 'D:/前端开发/云养丝路/云牧管家源代码/Cloud_FarmManager/pages/test/product-migration-test.vue'\nwx.createPage(MiniProgramPage)"],"names":["migration","uni","getAllProducts","getProductById"],"mappings":"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"}