# 云牧管家移动应用

**云养智旅** - 集云养殖、农产品购物和农场管理于一体的移动应用，致力于连接城市用户与农村养殖/种植业，提供沉浸式的云养殖体验和优质农产品购买渠道。

## 🚀 项目特色

- **云养殖游戏化体验**：沉浸式虚拟农场互动，真实数据驱动的成长系统
- **智能购物系统**：支持用户隔离的购物车、地址管理、订单处理
- **区块链溯源**：农产品全程可追溯，保障食品安全
- **实时监控**：IoT设备接入，农场环境数据实时监测
- **用户数据隔离**：完整的多用户权限管理和数据安全保障

## 🛠 技术栈

### 前端技术
- **框架**：uni-app (支持多端发布)
- **前端架构**：Vue 3 + Composition API
- **状态管理**：Pinia + 本地存储优化
- **UI设计**：原型设计 + 自定义组件系统

### 后端服务
- **云服务**：阿里云 uniCloud 一体化解决方案
- **数据库**：阿里云 MongoDB 云数据库
- **云函数**：Node.js 无服务器函数
- **用户认证**：uniCloud 用户管理系统

### IoT与监控
- **IoT平台**：阿里云物联网平台
- **视频监控**：阿里云视频直播/点播服务
- **数据采集**：环境传感器 + 自定义数据上报

### 区块链与安全
- **溯源系统**：阿里云区块链服务
- **数据加密**：用户数据完全隔离和加密存储

## 🎨 设计系统

### 主题色彩
- **主色调 (#bc4749)**：成熟果实红，用于强调按钮和重要元素
- **背景色 (#f2e8cf)**：麦田浅米色，营造温馨的农场氛围
- **辅助绿 (#a7c957)**：新生植物绿，用于进度条和标签
- **中绿色 (#6a994e)**：茂盛植被绿，用于次要内容展示
- **标题绿 (#386641)**：森林深绿色，用于导航栏和重要文本

### 界面特点
- 扁平化设计风格，符合现代移动应用审美
- 渐变和阴影效果提升视觉层次
- 响应式布局，适配多种屏幕尺寸
- 一致的交互反馈和状态提示

## 📁 项目结构

```
云牧管家源代码/Cloud_FarmManager/
├── pages/                    # 页面文件
│   ├── index/               # 首页 - 欢迎界面和功能导航
│   ├── login/               # 登录页 - 用户认证
│   ├── shopping/            # 购物模块
│   │   ├── shopping.vue     # 商城主页
│   │   ├── detail/          # 商品详情页
│   │   ├── cart/           # 购物车
│   │   └── checkout/       # 结算和地址管理
│   ├── farm/               # 云养模块
│   │   ├── farm.vue        # 农场主页
│   │   ├── game.vue        # 养殖游戏
│   │   ├── monitor.vue     # 实时监控
│   │   ├── data.vue        # 数据分析
│   │   └── my.vue          # 我的农场
│   ├── activity/           # 活动中心
│   ├── profile/            # 个人中心
│   └── test/               # 功能测试页面
├── components/             # 全局组件
│   ├── ProductCard.vue     # 商品卡片
│   ├── AddressItem.vue     # 地址卡片
│   ├── CartItem.vue        # 购物车商品项
│   ├── ActivityCard.vue    # 活动卡片
│   └── SearchInput.vue     # 搜索组件
├── api/                    # API服务层
│   ├── addressService.js   # 地址管理服务
│   └── productService.js   # 商品管理服务
├── store/                  # 状态管理
│   └── cart.js            # 购物车状态(支持用户隔离)
├── utils/                  # 工具函数
├── uniCloud-aliyun/        # 云端服务
│   ├── cloudfunctions/     # 云函数
│   │   ├── user-auth/      # 用户认证
│   │   ├── user-login/     # 用户登录
│   │   ├── user-register/  # 用户注册
│   │   ├── address-manager/# 地址管理
│   │   └── product-manager/# 商品管理
│   └── database/           # 数据库配置
├── static/                 # 静态资源
│   ├── images/            # 应用图片
│   ├── tabbar/            # 底部导航图标
│   └── game/              # 游戏资源
└── data/                   # 本地数据文件
```

## ✅ 已完成功能

### 1. 用户认证系统
- **注册登录**：完整的用户注册和登录流程
- **用户管理**：基于uniCloud的用户认证和权限管理
- **数据隔离**：每个用户的数据完全独立和安全

### 2. 购物系统 🛍️
- **商城浏览**：商品分类、搜索、筛选功能
- **商品详情**：详细的商品信息展示和区块链溯源
- **购物车管理**：支持用户隔离的购物车系统
  - 每个用户独立的购物车数据
  - 游客模式支持
  - 用户切换时自动数据迁移
- **订单结算**：完整的订单确认和支付流程
- **地址管理**：收货地址的增删改查和默认设置
  - 用户地址数据完全隔离
  - 省市区三级联动选择
  - 智能表单验证

### 3. 云养殖系统 🌱
- **农场主页**：能量系统、数据统计、功能导航
- **养殖游戏**：交互式游戏界面，虚实结合体验
- **实时监控**：农场视频监控和设备状态
- **数据分析**：环境数据图表化展示
- **农场管理**：我的认领和农场动态

### 4. 活动中心 🎉
- **活动展示**：各类农场活动和优惠信息
- **活动参与**：一键参与各类促销活动

### 5. 个人中心 👤
- **用户信息**：个人资料管理和设置
- **订单管理**：历史订单查看和状态跟踪
- **我的农场**：农场资产和收益管理
- **系统设置**：应用偏好和账户安全

### 6. 技术特性
- **响应式UI**：适配多种设备屏幕
- **状态管理**：Pinia + 本地存储优化策略
- **错误处理**：完整的异常捕获和用户友好提示
- **性能优化**：组件懒加载和资源压缩
- **用户体验**：加载状态、骨架屏、动画过渡

## 🔧 云函数服务

### 用户管理
- `user-register`: 用户注册服务
- `user-login`: 用户登录认证
- `user-auth`: 用户权限验证

### 业务服务
- `address-manager`: 地址管理(增删改查、默认设置)
- `product-manager`: 商品管理和查询服务

### 数据安全
- 所有用户数据基于 `userId` 严格隔离
- 云数据库权限精确控制
- API调用权限验证

## 🚀 快速开始

### 环境要求
- Node.js 16+
- HBuilderX 3.0+
- uniCloud 阿里云服务空间

### 安装依赖
```bash
npm install
```

### 开发运行
```bash
# H5版本
npm run dev:h5

# 微信小程序
npm run dev:mp-weixin

# APP版本
npm run dev:app-plus
```

### 云函数部署
1. 在HBuilderX中右键各云函数文件夹
2. 选择"上传并运行"
3. 在uniCloud控制台配置数据库权限

## 📊 数据库设计

### 核心数据表
- `user_addresses`: 用户收货地址表
- `user_carts`: 用户购物车数据(本地存储优化)
- `products`: 商品信息表
- `orders`: 订单数据表
- `farm_data`: 农场监控数据表

### 数据隔离策略
所有用户相关数据都基于 `userId` 字段进行严格隔离，确保数据安全。

## 🔄 开发进度

### 已完成 ✅
- [x] 项目架构搭建
- [x] UI设计系统
- [x] 用户认证系统
- [x] 购物车用户隔离
- [x] 地址管理系统
- [x] 商品浏览和详情
- [x] 订单结算流程
- [x] 云养殖页面布局
- [x] 个人中心功能

### 进行中 🚧
- [ ] IoT设备数据接入
- [ ] 实时视频监控集成
- [ ] 支付功能完善
- [ ] 区块链溯源系统

### 计划中 📋
- [ ] 推送通知系统
- [ ] 社交分享功能
- [ ] 数据统计分析
- [ ] 运营后台管理

## 🛡️ 用户数据安全

### 隔离机制
- **购物车隔离**：每个用户独立的购物车存储空间
- **地址隔离**：基于用户ID的地址权限控制
- **订单隔离**：用户只能查看自己的订单数据

### 安全特性
- 云函数API权限验证
- 数据库行级权限控制
- 前端token身份验证
- 敏感数据加密存储

## 📱 兼容性

- **微信小程序**：✅ 支持
- **H5浏览器**：✅ 支持
- **Android APP**：✅ 支持
- **iOS APP**：✅ 支持

## 🤝 贡献指南

1. 遵循项目的设计规范和色彩系统
2. 使用uni-app原生组件优先，提高性能
3. 保持代码风格一致性
4. 重要功能需要编写测试用例
5. API接口需要完整的错误处理

## 📄 文档说明

- `结算页面地址集成更新说明.md`: 地址管理集成详细说明
- `地址管理用户隔离指南.md`: 地址系统架构和使用指南  
- `购物车用户隔离说明.md`: 购物车数据隔离实现说明

## 📞 联系支持

如有问题或建议，请通过以下方式联系：
- 项目Issues
- 技术交流群
- 邮件支持

---

**云牧管家** - 让城市生活更贴近自然，让农村资源更好服务城市 🌾